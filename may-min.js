var Mayjs={VERSION:"0.5",HOST:this};"undefined"!==typeof module&&(module.exports=Mayjs);
var ObjectUtil=function(){return{has:function(a,b){return a&&a.hasOwnProperty(b)&&"function"!=typeof a[b]||!1},can:function(a,b){return a&&a[b]&&"function"==typeof a[b]||!1},eachKey:function(a,b){for(var d in a)if(!1===b(a[d]))break},eachProp:function(a,b,d){for(var c in a)if(a.hasOwnProperty(c)&&((d||!/^_/.test(c))&&"function"!=typeof a[c])&&!1===b(c,a[c]))break},eachOwn:function(a,b,d){for(var c in a)if(a.hasOwnProperty(c)&&(d||!/^_/.test(c))&&!1===b(c,a[c]))break},trace:function(a,b,d){for(;a;){if(!1===
d(a))return!1;a=a[b]}return!0},clone:function(a,b){if(Array.prototype.isPrototypeOf(a))return a.slice(0);var d={},c;for(c in a)d[c]=b?$clone(a[c]):a[c];return d},delegate:function(a,b){return a[b].bind(a)},mix:function(a,b,d){if(!b)return a;var c;if(d&&0<d.length)for(c in b)-1==d.indexOf(c)&&(a[c]=b[c]);else for(c in b)a[c]=b[c];return a},merge:function(a,b){for(var d={},c=null,g,f=0,h=arguments.length;f<h;f++)if(c=arguments[f])for(g in c)d[g]=c[g];return d}}}();
"undefined"!=typeof Mayjs&&Mayjs&&(Mayjs.MObjectUtil=ObjectUtil,Mayjs.$mix=ObjectUtil.mix,Mayjs.$merge=ObjectUtil.merge,Mayjs.$clone=ObjectUtil.clone,ObjectUtil=void 0);
$global=function(a){var b=function(b,c){var g=arguments.callee;if(g.defined(b))throw b+" has been defined";var f=c||eval(b);a[b]=f;g.regist(b)};b.defined="undefined"!=typeof exports?function(a){return"undefined"!=typeof eval(a)}:function(b){return a.hasOwnProperty?a.hasOwnProperty(b):"undefined"!==typeof a[b]};Object.defineProperty(b,"__variables__",{value:[],writable:!0});b.del=function(b){var c=this.__variables__.indexOf(b);if(0<=c){var g=this.__variables__;this.__variables__=g.slice(0,c).concat(g.slice(c+
1))}a[b]=null;delete a[b]};b.list=function(){return[].concat(this.__variables__)};b.regist=function(a){if(!this.defined(a))throw a+" is undefined";var b=this.__variables__;-1==b.indexOf(a)&&b.push(a)};return b}(this);"undefined"!=typeof Mayjs&&Mayjs&&(Mayjs.$global=$global,Mayjs.$global.regist("Mayjs"),$global=void 0);
var MayjsUtil={toObject:function(a){var b=typeof a,d=a;-1==["object","function"].indexOf(b)&&(d=new (eval(b.charAt(0).toUpperCase()+b.slice(1)))(a));return d},parseParamNames:function(a){return(a=a.toString().match(/.*?\((.*)?\)/))&&a[1]?a[1].split(","):[]},fn:function(){return arguments.callee.caller.apply(this,arguments)},parseArray:function(a){return Array.prototype.slice.call(a,0)},enumeration:function(a){if("object"==typeof a)return arguments[0];for(var b={},d=0,c=arguments.length;d<c;d++)b[arguments[d]]=
{};return b},methodize:function(a,b,d){var c=Array.prototype.slice;return function(){var g=b||this,g=[d?d(g):g].concat(c.call(arguments,0));return a.apply(null,g)}},overwrite:function(a,b,d){var c=a[b].bind(a);a[b]=function(){var b=[c].concat(Mayjs.util.parseArray(arguments));return d.apply(a,b)}},$var:function(a,b){var a=a||this,d="_temp"+Date.now();eval(d+"={value: {}}");eval(d).value=a;"string"==typeof b&&""!==b?b=b.split(" ").map(function(a){return a.trim()}):b||(b=Object.keys(a));return"var "+
b.map(function(a){return a+"="+d+".value['"+a+"']"}).join(",")+"; delete "+d},run:function(a){return 1==arguments.length?a():a.apply(this,Array.prototype.slice.call(arguments,1))}};"undefined"!=typeof Mayjs&&Mayjs&&(Mayjs.util=MayjsUtil,Mayjs.$run=MayjsUtil.run,Mayjs.$var=MayjsUtil.$var,Mayjs.$fn=MayjsUtil.fn,Mayjs.$enum=MayjsUtil.enumeration,MayjsUtil=void 0);
var meta=function(){var a=function(a){/^__.*__$/.test(a)||(a="__"+a+"__");return a};return{set:function(b,d,c,g){Object.defineProperty(b,a(d),{value:c,writable:!0!==g})},get:function(b,d){return b[a(d)]},has:function(b,d){return b.hasOwnProperty(a(d))}}}();"undefined"!=typeof Mayjs&&Mayjs&&(Mayjs.meta=meta,meta=void 0);
Mayjs.$run(function(a){function b(a,b){var i=[];if(c(Array,a))if(b)for(var h=0,j=b.length;h<j;h++)i.push({name:b[h],type:a[h]});else a.forEach(function(a){e(a,function(a,b){i.push({name:a,type:b});return!1})});else i.push({name:b[0],type:d(a)});return i}function d(a,b){interface_=b?Object.create(b):Object.create(l);j(interface_,a);return interface_}function c(a,b){if(null===a)return null===b;if(void 0===a)return void 0===b;var c=!1;switch(typeof a){case "string":c=typeof b==a;break;case "object":c=
l.isPrototypeOf(a)?g(a,b):a.isPrototypeOf(b);break;case "function":c=(c=a.prototype)?c.isPrototypeOf(b):b instanceof a}return c}function g(a,b){if(f.has(b,"interfaces")&&-1!=f.get(b,"interfaces").indexOf(a))return!0;for(var e in a)if(!/^__.*__$/.test(e))if(c(Array,a[e])){if(!c("function",b[e]))return!1}else if(!c(a[e],b[e]))return!1;return!0}var f=a.meta,h=a.util.parseArray,i=a.util.parseParamNames,e=a.MObjectUtil.eachOwn,j=a.MObjectUtil.mix,l={};a.$interface=d;a.$implement=function(a,e){f.has(e,
"interfaces")||f.set(e,"interfaces",[]);var i=f.get(e,"interfaces");if(-1==i.indexOf(a)){if(!g(a,e))throw"not supported interface";Object.keys(a).forEach(function(i){c(Array,a[i])&&f.set(e[i],"param_types",b(a[i]))});i.push(a)}};a.$support=g;a.$is=c;a.$check=function(){for(var a=arguments.callee.caller,e=a.arguments,a=0===arguments.length?f.get(a,"param_types"):b(h(arguments),i(a)),d,j=0,g=e.length;j<g;j++){d=a[j].type;if(null===d)break;if(!c(d,e[j]))return!1}return!0};a.$def=function(a,e){f.set(e,
"param_types",b(a,i(e)));return e};a.Interface=l},Mayjs);
Mayjs.$run(function(a){var b=a.meta,d=a.util.methodize,c=a.MObjectUtil.merge,g=a.MObjectUtil.eachOwn,f=a.MObjectUtil.trace;a.$module=function(a){return a};a.$include=function(h){var i=h.option,e=h.module,j=h.to,i=c({methodize:!1,context:null,methodizeTo:null,alias:null,forceInclude:!1},i);b.has(j,"modules")||b.set(j,"modules",[]);var l=b.get(j,"modules");f(j,"__proto__",function(a){l.concat(b.get(a,"modules"))});if(-1==l.indexOf(e)||i.forceInclude){var m=i.methodize;g(e,function(a,b){"onIncluded"!=
a&&(j[i.alias&&i.alias[a]?i.alias[a]:a]=m&&"function"==typeof b?d(b,i.context,i.methodizeTo):b)});b.has(e,"interfaces")&&b.get(e,"interfaces").forEach(function(b){a.$implement(b,j)});var n=b.get(j,"modules");(b.get(e,"modules")||[]).concat([e]).forEach(function(a){-1==l.indexOf(a)&&n.push(a)});e.onIncluded&&e.onIncluded.call(j,i.context||j)}}},Mayjs);
Mayjs.$run(function(a){function b(a,b){var c=Object.create(a),h;Object.__proto__?h=function(){var a=h.prototype.initialize;a&&a.apply(this,arguments)}:(d.set(c,"proto",a,!0),h=function(){this.__proto__=c;var a=h.prototype.initialize;a&&a.apply(this,arguments)});if(!h.extend){var g=arguments.callee;h.extend=function(a){return g(this.prototype,a)}}for(var f in b){var k=b[f];"function"==typeof k&&d.set(k,"name",f);c[f]=k}d.set(c,"interfaces",[]);h.prototype=c;return h}var d=a.meta,c=a.MObjectUtil.trace,
g=a.MObjectUtil.mix,f=a.$interface({initialize:[],base:[],__interfaces__:Array,__modules__:Array}),h=b(Object.prototype,{initialize:function(){d.set(this,"interfaces",[]);d.set(this,"modules",[])},_callerOwner:function(a,b){var h=null;if(b){if(this.__proto__[b]==a)return this.__proto__;c(this,"__proto__",function(c){if(c.hasOwnProperty(b)&&c[b]==a)return h=c,!1})}else c(this,"__proto__",function(b){Object.keys(b).forEach(function(c){if(b[c]==a)return h=b,d.set(a,"name",c),!1})});return h},base:function(){var a=
arguments.callee.caller,b=a.name||d.get(a,"name"),c=this._callerOwner(a,b);b||(b=d.get(a,"name"));b=(a=c?d.get(c,"proto"):null)?a[b]:null;if("function"==typeof b)return b.apply(this,arguments)}});a.$implement(f,h.prototype);h.extend=function(a){var c=b(this.prototype,a);a.initialize||(c.prototype.initialize=function(){this.base()});return c};a.$extend=b;a.Base=h;a.IBase=f;a.$class=function(a){return h.extend(a)};a.$obj=function(a){var b=new h;g(b,a);return b}},Mayjs);
Mayjs.$run(function(a){function b(b){var b=d(b),i=arguments.callee.findWrappersByObj(b);if(0===i.length)return b;var e={};i.forEach(function(d){a.$include({module:d.module,to:e,option:c({context:b},d.includeOption)})});return e}var d=a.util.toObject,c=a.MObjectUtil.merge,g=a.MObjectUtil.mix,f=a.meta;f.set(b,"map",[]);g(b,{findWrappersByType:function(a){var c=f.get(b,"map").filter(function(b){return b.type==a});return 0===c.length?[]:c[0].modules},findWrappersByPrototype:function(a){for(var c=[],e;a&&
!(c=c.concat(this.findWrappersByType(a)),f.has(a,"interfaces")&&f.get(a,"interfaces").forEach(function(a){c=c.concat(b.findWrappersByType(a))}),e=a,a=e.__proto__||(e.constructor?e.constructor.prototype:null),a==e););return c},findWrappersByObj:function(a){if(null===a)return[];var c=[],e=typeof a;"object"==e||"function"==e?(c=c.concat(b.findWrappersByPrototype(a.__proto__||a.constructor.prototype)),f.has(a,"interfaces")&&f.get(a,"interfaces").forEach(function(a){c=c.concat(b.findWrappersByType(a))})):
c=c.concat(b.findWrappersByType(e));return c},exists:function(a,c){return 0<f.get(b,"map").filter(function(b){return b.type==a}).filter(function(a){return a.module==c}).length},regist:function(a){var b=a.wrapper,c=a.toWrap,d=a.includeOption;if(c!=Function.prototype&&("function"==typeof c&&(c=c.prototype),c!=Function.prototype&&(!c||-1==["string","object"].indexOf(typeof c))))return;if("object"==typeof b){var a=f.get(this,"map"),g=a.filter(function(a){return a.type==c}),d={module:b,includeOption:d};
0===g.length?(g={type:c,modules:[d]},a.push(g)):0===g[0].modules.filter(function(a){return a.module==b}).length&&g[0].modules.push(d);return this}}});a.$=b;a.$$=function(c){var c=d(c),g=b.findWrappersByObj(c);if(0===g.length)return c;g.forEach(function(b){a.$include({module:b.module,to:c,option:b.includeOption})});return c}},Mayjs);
Mayjs.$run(function(a){function b(b,c){for(var h=b||arguments.callee.caller,i=d.get(h,"param_types"),c=c||h.arguments,e=0,j=c.length;e<j;e++){h=i[e].type;if(null===h)break;if(!a.$is(h,c[e]))return!1}return!0}var d=a.meta,c=a.$def;a.$overload=function(a,f){var h=["function"==typeof a?a:c(paramsTypes,f)],i=function(){var a=arguments,c;a:{c=a;var g=c.length,f=function(a){return d.get(a,"param_types")},i=h.filter(function(a){return f(a).length>=g});if(1>=i.length)c=i[0];else{for(var i=i.sort(function(a,
b){return f(a).length-f(b).length}),k;k=i.shift();)if(b(k,c)){c=k;break a}c=void 0}}if(c)return c.apply(this,a)};i.overload=function(a,b){h.push("function"==typeof a?a:c(a,b));return this};return i}},Mayjs);
Mayjs.$run(function(a){var b=a.util.methodize,d=a.util.parseParamNames;a.dsl={$:a.$,$$:a.$$,$check:a.$check,$class:a.$class,$clone:a.$clone,$var:a.$var,$def:a.$def,$enum:a.util.enumeration,$fn:a.util.fn,$global:a.$global,$implement:a.$implement,$interface:a.$interface,$is:a.$is,$merge:a.MObjectUtil.merge,$mix:a.MObjectUtil.mix,$module:a.$module,$obj:a.$obj,$run:a.$run,$support:a.$support};a.DSL=function(){return a.$var(a.dsl)};a.MFunctionWrapper=a.$module({overload:function(b,d,f){b=a.$overload(b);
b.overload(d,f);return b},paramNames:function(a){return d(a)},methodize:b});b={meta:a.meta.get,setMeta:a.meta.set,hasMeta:a.meta.has,include:function(b,d,f){return a.$include({module:d,to:b,option:f})},overwrite:a.util.overwrite};a.$include({module:b,to:a.Base.prototype,option:{methodize:!0}});a.$include({module:a.MObjectUtil,to:a.Base.prototype,option:{methodize:!0}});a.MObjectWrapper={set:function(a,b,d){a[b]=d;return a},get:function(a,b){return a[b]},call:function(a,b){var b=a[b],d=util.parseArray(arguments).split(2);
return b.apply(a,d)}};a.$include({module:a.MObjectUtil,to:a.MObjectWrapper});a.$include({module:b,to:a.MObjectWrapper});a.$.regist({wrapper:a.MObjectWrapper,toWrap:Object,includeOption:{methodize:!0}});a.$.regist({wrapper:a.MFunctionWrapper,toWrap:Function,includeOption:{methodize:!0}})},Mayjs);
