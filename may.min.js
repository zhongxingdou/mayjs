/*! mayjs 2015-04-27 */
var M=function(a){if(0==arguments.length)return M.exportDSL();if(a){var b=M.$wrapper(),c=Array.prototype.slice.call(arguments,1);return a.apply(this,[b.$,b.$$].concat(c))}};M.global=this,"undefined"!=typeof global&&(M.global=global),M.exportDSL=function(a){var b=function(){return Object.keys(M).filter(function(a){return/^\$/.test(a)&&-1==["$","$$"].indexOf(a)})};return a?(b().forEach(function(b){a[b]=M[b]}),void 0):M.util.dsl(M,b())+M.util.dsl(M.$wrapper())},"undefined"!=typeof module&&(module.exports=M),function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(255&a[b>>5]>>>b%32);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(15&b>>>4)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}"function"==typeof define&&define.amd?define(function(){return t}):a.md5=t}(M),M.util={parseArguNames:function(a){var b=a.toString().match(/.*?\((.*)?\)/);return b&&b[1]?b[1].split(",").map(function(a){return a.trim()}):[]},makeMultiTargetFn:function(a){return function(){if(arguments.length<=2)return a(arguments[0],arguments[1]);for(var b=arguments[0],c=1,d=arguments.length;d>c;c++)if(a(b,arguments[c])===!1)return!1;return!0}},toObject:function(a){var b=a;switch(typeof a){case"string":b=new String(a);break;case"number":b=new Number(a);break;case"boolean":b=new Boolean(a)}return b},fn:function(){return arguments.callee.caller.apply(this,arguments)},parseArray:function(a){return Array.prototype.slice.call(a,0)},enumeration:function(a){if("object"==typeof a)return arguments[0];for(var b={},c=0,d=arguments.length;d>c;c++)b[arguments[c]]={};return b},methodize:function(a,b,c){return function(){var d=b||this;c&&(d=c(d));var e=Array.prototype.slice,f=[d].concat(e.call(arguments));return a.apply(this,f)}},overwrite:function(a,b,c){var d=a[b].bind(a);a[b]=function(){var a=[d].concat(Array.prototype.slice.call(arguments,0));return c.apply(this,a)}},dsl:function(obj,members){obj=obj||this;var tempVarName="_temp"+Date.now()+Math.random().toString().substr(2);eval(tempVarName+"={value: {}}");var temp=eval(tempVarName);temp.value=obj,"string"==typeof members&&""!==members?members=members.split(" ").map(function(a){return a.trim()}):members||(members=Object.keys(obj));var codes=members.map(function(a){return a+"="+tempVarName+".value"+"['"+a+"']"});return"var "+codes.join(",")+";delete "+tempVarName+";"},run:function(a){return 1==arguments.length?a():a.apply(this,Array.prototype.slice.call(arguments,1))}},M.$fn=M.util.fn,M.$run=M.util.run,M.$enum=M.util.enumeration,M.$overwrite=M.util.overwrite,M.$methodize=M.util.methodize,M.$dsl=M.util.dsl,M.MObjectUtil={isPrivate:function(a){return/^__/.test(a)},isProtected:function(a){return/^_(?!_)/.test(a)},isPublic:function(a){return!this.isProtected(a)&&!this.isPrivate(a)},has:function(a,b){if(!a||!b)return!1;if(!/\./.test(b))return a.hasOwnProperty(b);for(var c,d=b.split("."),e=d.pop(),f=a;c=d.shift();)if(f=f[c],!f)return!1;return f.hasOwnProperty(e)},can:function(a,b){if(!a||!b)return!1;if(!/\./.test(b))return"function"==typeof a[b];for(var c,d=b.split("."),b=d.pop(),e=a;c=d.shift();)if(e=e[c],!e)return!1;return"function"==typeof e[b]},eachAll:function(a,b){for(var c in a)if(b(c,a[c])===!1)break},eachOwn:function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&this.isPublic(c)&&b(c,a[c])===!1)break},eachProp:function(a,b){this.eachOwn(a,function(a,c){return"function"!=typeof c?b(a,c):void 0})},traverseChain:function(a,b,c){for(var d=a[b];d;){if(c(d)===!1)return!1;d=d[b]}return!0},clone:function(a,b){if(!a)return a;if(-1==["object","function"].indexOf(typeof a))return a;if("function"==typeof a.clone)return a.clone(b);var c={},d=Object.prototype.toString.call(a).slice(8,-1);if("Array"===d)if(c=[],b)for(var e=0,f=a.length;f>e;e++)c.push(arguments.callee(a[e],b));else c=a.slice(0);else"Object"!==d&&(c=new a.constructor(a.valueOf()));if(b){for(var g in a)if("constructor"!=g){var h=a[g];c[g]="__proto__"!=g?Object.prototype.isPrototypeOf(h)?arguments.callee(h,b):h:h}}else for(var g in a)c[g]=a[g];return c},mix:function(a,b,c){if(!b)return a;var d;if(c)for(d in b)-1==c.indexOf(d)&&(a[d]=b[d]);else for(d in b)a[d]=b[d];return a},merge:function(){for(var a,b={},c=null,d=0,e=arguments.length;e>d;d++)if(c=arguments[d])for(a in c)b[a]=c[a];return b}},M.$merge=M.MObjectUtil.merge,M.$mix=M.MObjectUtil.mix,M.$clone=M.MObjectUtil.clone,M.util.run(function(a){function b(a,b){var c=[];if(e(Array,a))if(b)for(var f=0,g=b.length;g>f;f++)c.push({name:b[f],type:a[f]});else a.forEach(function(a){for(var b in a){"returns"!=b&&c.push({name:b,type:a[b]});break}});else c.push({name:b[0],type:d(a)});return c}function c(c,d){return d.__argu_types__=b(c,a.util.parseArguNames(d)),d}function d(a,b){interface_=b?Object.create(b):Object.create(i);for(var c in a)interface_[c]=a[c];return interface_}function e(a,b){if(m(a,b)||n(a,b))return!0;var c=typeof a;if("function"==c){if(a.prototype&&n(a.prototype,b))return!0}else if("object"==c)return f(a,b);return!1}function f(a,b,c){if(!c&&b.__interfaces__&&-1!=b.__interfaces__.indexOf(a))return!0;var d=/^\[(.*?)\]$/,f=/^__.*__$/;for(var g in a){var h=b[g],i=a[g],j=g.match(d);if(!(j&&(g=j[1],h=b[g],null==h)||f.test(g)||m(Array,i)||e(i,h)))throw g+" invalid"}return!0}function g(a,c){var d=c.__interfaces__||(c.__interfaces__=[]);if(-1==d.indexOf(a)){if(!f(a,c))throw"object did not implement given interface";Object.keys(a).forEach(function(d){e(Array,a[d])&&(c[d].__argu_types__=b(a[d]))}),d.push(a)}}function h(){var c,d=arguments.callee.caller,f=d.arguments;c=0===arguments.length?d.__argu_types__:b(Array.prototype.slice.call(arguments),a.util.parseArguNames(d));for(var g,h=0,i=c.length;i>h;h++){if(g=c[h].type,void 0===g)return!0;if(!e(g,f[h]))return!1}return!0}var i={},j=function(a){return Object.prototype.toString.call(a)},k=a.util.makeMultiTargetFn(function(a,b){if(null==a||"undefined"==a)return null==b;var c=j(b);return"number"==a||a==Number?c==j(new Number):"string"==a||a==String?c==j(new String):"boolean"==a||a==Boolean?c==j(new Boolean):"function"==a||a==Function?"function"==typeof b:!1}),l=a.util.makeMultiTargetFn(function(a,b){return"function"!=typeof a?!1:-1!=[Array,RegExp,Error,Date].indexOf(a)?j(a.prototype)===j(b):b instanceof a}),m=a.util.makeMultiTargetFn(function(a,b){return k(a,b)?!0:l(a,b)?!0:!1}),n=a.util.makeMultiTargetFn(function(a,b){return"object"!=typeof a?!1:null==a?!1:a.isPrototypeOf(b)}),o=function(a,b){if(a===!1){if(b)throw b;throw"$check failed"}};a.$ensure=function(a){try{return a()}catch(b){return void 0!=typeof console&&console.error&&console.error(b),!1}},a.Interface=i,a.$interface=d,a.$support=f,a.$implement=g,a.$is=m,a.$hasProto=n,a.$checkArgu=h,a.$func=c,a.$check=o,a._is=e},M),M.util.run(function(a){function b(a){return a}function c(b,c,d){var e={methodize:!1,context:null,methodizeTo:null,stopCallback:!1};d=a.MObjectUtil.merge(e,c.__option__,d);var f=d.methodize;a.MObjectUtil.eachOwn(c,function(c,e){"onIncluded"===c||c.match(/^__.*__$/)||(b[c]=f&&"function"==typeof e?a.util.methodize(e,d.context,d.methodizeTo):e)}),c.__interfaces__&&c.__interfaces__.forEach(function(c){a.$implement(c,b)}),!d.stopCallback&&c.onIncluded&&c.onIncluded.call(b,d.context||b)}var d={"[context]":Object,"[methdize]":Boolean,"[methdizeTo]":[Object],"[supports]":Array,"[stopCallback]":Boolean},e={"[__option__]":d,"[onIncluded]":Function};a.$module=b,a.$include=c,a.IModuleOption=d,a.IModule=e},M),M.util.run(function(a){function b(){}function c(a){return h.extend(a)}function d(a){return f.extend(a)}var e=a.MObjectUtil.traverseChain;a.MObjectUtil.mix;var f={__interfaces__:[],onExtend:function(){},extend:function(a){var b=Object.create(this);Object.__proto__||(b.__proto__=this);for(var c in a){var d=a[c];b[c]=d,"function"==typeof d&&(d.__name__=c)}return"function"==typeof this.onExtend&&this.onExtend(b),b},base:function(){var a=arguments.callee.caller,b=a.name||a.__name__,c=this.__getCallerOwner(a,b);b||(b=a.__name__);var d=c?c.__proto__:null,e=d?d[b]:null;return"function"==typeof e?e.apply(this,arguments):void 0},__getCallerOwner:function(a,b){var c=null;if(b){if(this.hasOwnProperty(b)&&this[b]===a)return this;if(this.__proto__[b]==a)return this.__proto__;e(this,"__proto__",function(d){return d.hasOwnProperty(b)&&d[b]==a?(c=d,!1):void 0})}else{for(var d in this)if(this[d]===a){c=this,a.__name__=d;break}if(c)return c;e(this,"__proto__",function(b){for(var d,e=Object.keys(b),f=0,g=e.length;g>f;f++)if(d=e[f],b[d]===a){c=b,a.__name__=d;break}})}return c}};b.prototype=f.extend({initialize:function(){this.__interfaces__=[];var a=this;e(this,"__proto__",function(b){b.constructor.fireInitialized&&b.constructor.fireInitialized(a)})}});var g=function(){this.__initObservers__=[]};g.prototype={fireInitialized:function(a){this.__initObservers__.forEach(function(b){b.call(a)})},onInitialize:function(a){this.__initObservers__.push(a)},include:function(b,c){b.onIncluded?(c=c||{},c.stopCallback=!0,a.$include(this.prototype,b,c),b.onIncluded(this)):a.$include(this.prototype,b,c)},extend:function(b,c){var d=b.modules;d&&delete b.modules;var e=this.prototype.extend(b);e.hasOwnProperty("initialize")||(e.initialize=function(){this.base.apply(this,arguments)});var f;return f=Object.__proto__?function(){return e.isPrototypeOf(this)?(this.constructor=f,e.initialize.apply(this,arguments),void 0):new arguments.callee}:function(){return e.isPrototypeOf(this)?(this.constructor=f,this.__proto__=e,e.initialize.apply(this,arguments),void 0):new arguments.callee},e.constructor=f,f.prototype=e,a.MObjectUtil.mix(f,new g),c&&a.MObjectUtil.mix(f,c),d&&f.include&&d.forEach(function(a){f.include(a)}),"function"==typeof this.onExtend&&this.onExtend(f),f}},a.MObjectUtil.mix(b,new g);var h=b.extend({}),i=a.$interface({base:[],__interfaces__:Array});a.$implement(i,f),a.IBase=i,a.BaseObj=f,a.BaseClass=h,a.$class=c,a.$obj=d},M),M.util.run(function(a){var b=a.util.toObject,c=a.MObjectUtil.merge;a.MObjectUtil.mix;var d=function(b){var c=Object.keys(b).join("");return""===c&&(c=b.constructor.toString()),a.md5(c)},e=a.$class({initialize:function(){this.__map__=[],this.__DSL__={$:this.$.bind(this),$$:this.$$.bind(this)},this.__DSL__.$.reg=this.$reg.bind(this),this.__DSL__.$.clear=this.$clear.bind(this)},__wrap:function(d,e,f){d=b(d),e||(e=d);var g=this.__findWrappersByObj(d);return 0===g.length?d:(g.forEach(function(b){var d=f?c(f,b.includeOption):b.includeOption;a.$include(e,b.module,d)}),e)},$clear:function(){this.__map__=[]},$:function(a){var b={valueOf:function(){return a}};return this.__wrap(a,b,{context:a})},$$:function(a){return this.__wrap(a)},$reg:function(a,b,c){if(a&&"object"==typeof a){var e=c||a.__option__||{};b=b||e.supports;for(var f=Array.prototype.isPrototypeOf(b)?b:[b],g=0,h=f.length;h>g;g++){var i=f[g];if("function"==typeof i&&(i=i.prototype),i){var j={module:a,includeOption:e},k=this.__map__,l=d(i);if(k[l]){var m=k[l];m.some(function(b){return b.module===a})||m.push(j)}else k[l]=[j]}}return this}},__findWrappersByType:function(a){var b=d(a);return this.__map__[b]||[]},findWrappersByType:function(a){return this!=f?f.__findWrappersByType(a).concat(this.__findWrappersByType(a)):this.__findWrappersByType(a)},__findWrappersByPrototype:function(a){for(var b,c=this,d=[];a&&(d=d.concat(c.findWrappersByType(a)),a.hasOwnProperty&&a.hasOwnProperty("__interfaces__")&&a.__interfaces__.forEach(function(a){d=d.concat(c.findWrappersByType(a))}),b=a,a=b.__proto__||(b.constructor?b.constructor.prototype:null),a!=b););return d},__findWrappersByObj:function(a){if(null===a)return[];var b=[],c=this,d=function(a){b=b.concat(c.findWrappersByType(a))},e=typeof a;return("object"==e||"function"==e)&&(b=b.concat(this.__findWrappersByPrototype(a.__proto__||a.constructor.prototype)),a.hasOwnProperty&&a.hasOwnProperty("__interfaces__")&&a.__interfaces__.forEach(function(a){d(a)})),b}});a.$wrapper=function(){return(new e).__DSL__};var f=new e;a.MObjectUtil.mix(a,f.__DSL__),a.Wrapper=e},M),M.util.run(function(a){function b(b,c){var d=b||arguments.callee.caller,e=d.__argu_types__;c=c||d.arguments;for(var f,g=0,h=c.length;h>g;g++){if(f=e[g].type,null===f)return!0;if(f instanceof RegExp){if(!f.test(c[g]))return!1}else if(!a.$ensure(function(){return a._is(f,c[g])}))return!1}return!0}function c(a,c){var d=c.length,e=a.filter(function(a){return a.__argu_types__.length>=d});if(0==e.length)return null;if(0==c.length)return e[0];for(var f;f=e.shift();)if(b(f,c))return f}function d(a,b){var d={value:[]},f=function(a,b){"function"==typeof a?(b=a,a=null,b.hasOwnProperty("__argu_types__")||(b.__argu_types__=[])):e(a,b),d.value.push(b)};f(a,b);var g=function(){var a=arguments,b=c(d.value,a);return b?b.apply(this,a):void 0};return g.overload=function(a,b){return f(a,b),d.value=d.value.sort(function(a,b){return a.__argu_types__.length-b.__argu_types__.length}),this},g}var e=a.$func;a.$overload=d},M),M.util.run(function(){var a=function(a){this.valueOf=function(){return a}};a.prototype.tap=function(b){return new a(b(this.valueOf()))},M.MObjectWrapper={tap:function(b){return new a(b(this.valueOf()))},mix:function(a,b){return M.$mix(this.valueOf(),a,b),this},include:function(a,b){return M.$include(this.valueOf(),b),this},has:function(a){return M.MObjectUtil.has(this.valueOf(),a)},can:function(a){return M.MObjectUtil.can(this.valueOf(),a)},eachProp:function(a){return M.MObjectUtil.eachProp(this.valueOf(),a),this},__option__:{supports:[Object]}}});